!function(l,e){"use strict";var n={loaderClass:"loader",mainClass:"crossword",clueClass:"crossword-clues",config:{},map:[]},s=e("."+n.mainClass);n.init=function(n){this.config=n,i(),u(),e(l).on("resize",this.resizePuzzle),a(),e("."+this.loaderClass).css({display:"none"})};var a=function(){s.on("focus","input",p),s.on("blur","input",o)},o=function(){s.find("input").removeClass("select")},p=function(l){var n=Math.max.apply(null,e(l.target).closest(".puzzle-cell").data("puzzle"));o(),s.find(".puzzle-"+n+" input").addClass("select")},d=function(){var l,e;for(l=0;l<n.config.sizeX;l++)for(n.map[l]=[],e=0;e<n.config.sizeY;e++)n.map[l][e]=[]},i=function(){var l,e,s=n.config.across,a=n.config.down;for(d(),l=0;l<s.length;l++){for(e=0;e<s[l].length;e++)n.map[s[l].y-1][s[l].x+e-1].push(s[l].number);t("across",s[l].number,s[l].desc,s[l].length)}for(l=0;l<a.length;l++){for(e=0;e<a[l].length;e++)n.map[a[l].y+e-1][a[l].x-1].push(a[l].number);t("down",a[l].number,a[l].desc,a[l].length)}},u=function(){var l,a,o,p,d="",i=0;for(e("<div>").appendTo(s).addClass("crossword-puzzle"),l=0;l<n.map.length;l++)for(e("<div>").appendTo(s.find(".crossword-puzzle")).addClass("puzzle-row puzzle-row-"+(l+1)),a=0;a<n.map[l].length;a++)d="puzzle-input",o=[],p=[],n.map[l][a].forEach(function(l){o.push("puzzle-"+l),p.push(l)}),0===n.map[l][a].length&&(d="puzzle-none"),e("<div>").appendTo(s.find(".puzzle-row-"+(l+1))).addClass("puzzle-cell").addClass(o.join(" ")).addClass("puzzle-cell-"+(a+1)+(l+1)).addClass(d).data("puzzle",p).css({width:100/n.config.sizeX+"%"}),n.map[l][a].length>0&&i<Math.max.apply(null,n.map[l][a])&&(s.find(".puzzle-cell-"+(a+1)+(l+1)).append("<span>"+(i+1)+"</span>"),i=Math.max.apply(null,n.map[l][a]));n.resizePuzzle(),r()},r=function(){var l=e('<input maxlength="1" val="" type="text" />');s.find(".puzzle-input").append(l)};n.resizePuzzle=function(){s.find(".puzzle-cell").css({height:s.find(".puzzle-cell").width(),fontSize:s.find(".puzzle-cell").width()/3})};var t=function(l,s,a,o){var p=e("."+n.clueClass);0===p.find("h2.crossword-label-"+l).length&&(e("<h2>").appendTo(p).text(l).addClass("crossword-label-"+l),e("<ul>").appendTo(p).addClass("crossword-clues-"+l)),e("<li>").appendTo(p.find("ul.crossword-clues-"+l)).html(s+". "+a+" ("+o+")").addClass("crossword-clue")};l.Crossword=n}(window,jQuery);